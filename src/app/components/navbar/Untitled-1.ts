
    //   let json = [
    // {
    //   'indication':
    //     { 'duration': null, 'durationUnit': 'Días', 'frecuency': 24, 'frecuencyType': 'Permanente', 'frecuencyUnit': 'Horas', 'indicationStartDate': '14/08/2019', 'observation': '1 comprimido en la noche', 'units': 1, 'unitType': 'Comprimido' }, 'medication': { 'id': 'MC-127261', 'name': 'fexofenadina 120 mg comprimido', 'commercialRecommendation': { 'name': 'Alexia 120 mg x 30 comprimidos', 'id': '4092' } }, 'quotation': [{ 'intermediary': { 'id': '--', 'name': 'YAPP' }, 'commercialMedication': [{ 'farmacy': { 'id': 3, 'name': 'Salcobrand' }, 'products': [{ 'id': '4669', 'name': 'Eliquis Tabl Recubie 5 Mg X 60', 'activeIngredient': 'Apixaban 5 mg', 'labName': 'Pfizer', 'price': 81399 }] }, { 'farmacy': { 'id': 1, 'name': 'Cruz Verde' }, 'products': [{ 'id': '4669', 'name': 'Eliquis Tabl Recubie 5 Mg X 60', 'activeIngredient': 'Apixaban 5 mg', 'labName': 'Pfizer', 'price': 81390 }] }, { 'farmacy': { 'id': 2, 'name': 'Ahumada' }, 'products': [{ 'id': '4669', 'name': 'Eliquis Tabl Recubie 5 Mg X 60', 'activeIngredient': 'Apixaban 5 mg', 'labName': 'Pfizer', 'price': 80295 }] }, { 'farmacy': { 'id': 11, 'name': 'Carmen' }, 'products': [{ 'id': '4669', 'name': 'Eliquis Tabl Recubie 5 Mg X 60', 'activeIngredient': 'Apixaban 5 mg', 'labName': 'Pfizer', 'price': 74590 }] }, { 'farmacy': { 'id': 65, 'name': 'Farmacias Asfar' }, 'products': [{ 'id': '4669', 'name': 'Eliquis Tabl Recubie 5 Mg X 60', 'activeIngredient': 'Apixaban 5 mg', 'labName': 'Pfizer', 'price': 56015 }] }] }]
    // }, { 'indication': { 'duration': 5, 'durationUnit': 'Días', 'frecuency': 8, 'frecuencyType': 'Diario', 'frecuencyUnit': 'Horas', 'indicationStartDate': '14/08/2019', 'observation': null, 'units': 1, 'unitType': 'Comprimido' }, 'medication': { 'id': 'MC-79678', 'name': 'clidinio bromuro 2,5 mg + clordiazepóxido 5 mg comprimido', 'commercialRecommendation': null }, 'quotation': [{ 'intermediary': { 'id': '--', 'name': 'YAPP' }, 'commercialMedication': [{ 'farmacy': { 'id': 1, 'name': 'Cruz Verde' }, 'products': [{ 'id': '4047', 'name': 'Acevit Gotas 30 Ml X 1', 'activeIngredient': 'Acido Ascorbico 75 mg / 0,6 ml + Ergocalciferol 0,025 mg / 0,6 ml + Retinol 2,75 mg / 0,6 ml', 'labName': 'Abbott', 'price': 17090 }] }, { 'farmacy': { 'id': 47, 'name': 'Farmacias Paris' }, 'products': [{ 'id': '4047', 'name': 'Acevit Gotas 30 Ml X 1', 'activeIngredient': 'Acido Ascorbico 75 mg / 0,6 ml + Ergocalciferol 0,025 mg / 0,6 ml + Retinol 2,75 mg / 0,6 ml', 'labName': 'Abbott', 'price': 12450 }] }, { 'farmacy': { 'id': 2, 'name': 'Ahumada' }, 'products': [{ 'id': '4047', 'name': 'Acevit Gotas 30 Ml X 1', 'activeIngredient': 'Acido Ascorbico 75 mg / 0,6 ml + Ergocalciferol 0,025 mg / 0,6 ml + Retinol 2,75 mg / 0,6 ml', 'labName': 'Abbott', 'price': 17295 }] }, { 'farmacy': { 'id': 11, 'name': 'Carmen' }, 'products': [{ 'id': '4047', 'name': 'Acevit Gotas 30 Ml X 1', 'activeIngredient': 'Acido Ascorbico 75 mg / 0,6 ml + Ergocalciferol 0,025 mg / 0,6 ml + Retinol 2,75 mg / 0,6 ml', 'labName': 'Abbott', 'price': 11830 }] }] }] }]

    // let json = [{ "indication": { "duration": 15, "durationUnit": "Días", "frecuency": 12, "frecuencyType": "Diario", "frecuencyUnit": "Horas", "indicationStartDate": "14/08/2019", "observation": "20 minutos antes de cada comida", "units": 1, "unitType": "Cápsula" }, "medication": { "id": "MC-1426252", "name": "omeprazol 20 mg cápsula", "commercialRecommendation": null }, "quotation": [{ "intermediary": { "id": "--", "name": "YAPP" }, "commercialMedication": [{ "farmacy": { "id": 3, "name": "Salcobrand" }, "products": [{ "id": "6235", "name": "Omeprazol 20 mg x 30 Cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "Laboratorio Chile", "price": 1599 }, { "id": "6251", "name": "Omeprazol 20 mg x 60 Cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "Laboratorio Chile", "price": 3299 }] }, { "farmacy": { "id": 1, "name": "Cruz Verde" }, "products": [{ "id": "14039", "name": "Losec Caps 20 Mg X 28", "activeIngredient": "Omeprazol 20 mg", "labName": "Merck", "price": 24725 }, { "id": "5129", "name": "LOMEX 20 mg - x 35 cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "+", "price": 30590 }, { "id": "6235", "name": "Omeprazol 20 mg x 30 Cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "Laboratorio Chile", "price": 1390 }, { "id": "6251", "name": "Omeprazol 20 mg x 60 Cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "Laboratorio Chile", "price": 3090 }] }, { "farmacy": { "id": 47, "name": "Farmacias Paris" }, "products": [{ "id": "5129", "name": "LOMEX 20 mg - x 35 cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "+", "price": 25450 }, { "id": "6235", "name": "Omeprazol 20 mg x 30 Cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "Laboratorio Chile", "price": 1950 }, { "id": "6251", "name": "Omeprazol 20 mg x 60 Cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "Laboratorio Chile", "price": 3950 }] }, { "farmacy": { "id": 2, "name": "Ahumada" }, "products": [{ "id": "5129", "name": "LOMEX 20 mg - x 35 cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "+", "price": 30995 }, { "id": "6235", "name": "Omeprazol 20 mg x 30 Cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "Laboratorio Chile", "price": 1495 }, { "id": "6251", "name": "Omeprazol 20 mg x 60 Cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "Laboratorio Chile", "price": 3395 }] }, { "farmacy": { "id": 4, "name": "Dr. Simi" }, "products": [{ "id": "6235", "name": "Omeprazol 20 mg x 30 Cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "Laboratorio Chile", "price": 1080 }, { "id": "14216", "name": "Omeprazol 20 Mg X 28 Capsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "Genericos", "price": 760 }] }, { "farmacy": { "id": 29, "name": "Liga Chilena Contra La Epilepsia" }, "products": [{ "id": "5129", "name": "LOMEX 20 mg - x 35 cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "+", "price": 21525 }, { "id": "6235", "name": "Omeprazol 20 mg x 30 Cápsulas", "activeIngredient": "Omeprazol 20 mg", "labName": "Laboratorio Chile", "price": 1050 }] }] }] }, { "indication": { "duration": 5, "durationUnit": "Días", "frecuency": 8, "frecuencyType": "Diario", "frecuencyUnit": "Horas", "indicationStartDate": "14/08/2019", "observation": null, "units": 1, "unitType": "Cucharadita" }, "medication": { "id": "MC-7259653", "name": "clorfenamina 0,5 mg/5 mL + codeína 10 mg/5 mL + pseudoefedrina clorhidrato 7,5 mg/5 mL solución oral", "commercialRecommendation": { "name": "Bequium Jbe 120 ml", "id": "4240" } }, "quotation": [{ "intermediary": { "id": "--", "name": "YAPP" }, "commercialMedication": [{ "farmacy": { "id": 3, "name": "Salcobrand" }, "products": [{ "id": "4581", "name": "Deucotos Jbe 120 Ml X 1", "activeIngredient": "Clorfenamina 0,5 mg / 5 ml + Codeina 10 mg / 5 ml + Pseudoefedrina 7,5 mg / 5 ml", "labName": "Medipharm", "price": 10999 }, { "id": "6705", "name": "Extosen Soln 100 Ml X 1", "activeIngredient": "Clorfenamina 0,5 mg / 5 ml + Codeina 10 mg / 5 ml + Pseudoefedrina 7,5 mg / 5 ml", "labName": "Sanitas", "price": 6299 }] }, { "farmacy": { "id": 1, "name": "Cruz Verde" }, "products": [{ "id": "4581", "name": "Deucotos Jbe 120 Ml X 1", "activeIngredient": "Clorfenamina 0,5 mg / 5 ml + Codeina 10 mg / 5 ml + Pseudoefedrina 7,5 mg / 5 ml", "labName": "Medipharm", "price": 10490 }, { "id": "6705", "name": "Extosen Soln 100 Ml X 1", "activeIngredient": "Clorfenamina 0,5 mg / 5 ml + Codeina 10 mg / 5 ml + Pseudoefedrina 7,5 mg / 5 ml", "labName": "Sanitas", "price": 6290 }, { "id": "8862", "name": "Codetol pm Infantil x 120 mL Jarabe", "activeIngredient": "Clorfenamina 0,5 mg / 5 ml + Codeina 10 mg / 5 ml + Pseudoefedrina 7,5 mg / 5 ml", "labName": "Laboratorio Chile", "price": 16490 }] }, { "farmacy": { "id": 47, "name": "Farmacias Paris" }, "products": [{ "id": "8862", "name": "Codetol pm Infantil x 120 mL Jarabe", "activeIngredient": "Clorfenamina 0,5 mg / 5 ml + Codeina 10 mg / 5 ml + Pseudoefedrina 7,5 mg / 5 ml", "labName": "Laboratorio Chile", "price": 11450 }] }, { "farmacy": { "id": 2, "name": "Ahumada" }, "products": [{ "id": "6705", "name": "Extosen Soln 100 Ml X 1", "activeIngredient": "Clorfenamina 0,5 mg / 5 ml + Codeina 10 mg / 5 ml + Pseudoefedrina 7,5 mg / 5 ml", "labName": "Sanitas", "price": 5755 }, { "id": "8862", "name": "Codetol pm Infantil x 120 mL Jarabe", "activeIngredient": "Clorfenamina 0,5 mg / 5 ml + Codeina 10 mg / 5 ml + Pseudoefedrina 7,5 mg / 5 ml", "labName": "Laboratorio Chile", "price": 15995 }, { "id": "4581", "name": "Deucotos Jbe 120 Ml X 1", "activeIngredient": "Clorfenamina 0,5 mg / 5 ml + Codeina 10 mg / 5 ml + Pseudoefedrina 7,5 mg / 5 ml", "labName": "Medipharm", "price": 10495 }] }, { "farmacy": { "id": 11, "name": "Carmen" }, "products": [{ "id": "4581", "name": "Deucotos Jbe 120 Ml X 1", "activeIngredient": "Clorfenamina 0,5 mg / 5 ml + Codeina 10 mg / 5 ml + Pseudoefedrina 7,5 mg / 5 ml", "labName": "Medipharm", "price": 7700 }, { "id": "6705", "name": "Extosen Soln 100 Ml X 1", "activeIngredient": "Clorfenamina 0,5 mg / 5 ml + Codeina 10 mg / 5 ml + Pseudoefedrina 7,5 mg / 5 ml", "labName": "Sanitas", "price": 5550 }] }, { "farmacy": { "id": 42, "name": "Arauco" }, "products": [{ "id": "8862", "name": "Codetol pm Infantil x 120 mL Jarabe", "activeIngredient": "Clorfenamina 0,5 mg / 5 ml + Codeina 10 mg / 5 ml + Pseudoefedrina 7,5 mg / 5 ml", "labName": "Laboratorio Chile", "price": 1680 }] }] }] }]


    // console.log("json", json)

    // let farmacias: any = []
    // for (let i = 0; i < json.length; i++) {
    //   for (let j = 0; j < json[i].quotation[0].commercialMedication.length; j++) {
    //     if (farmacias.length === 0) {
    //       let index = farmacias.push(json[i].quotation[0].commercialMedication[j].farmacy) - 1
    //       farmacias[index].medicamentos = []
    //       farmacias[index].medicamentos.push(json[i].medication)
    //     } else {
    //       let existeFarmacia = farmacias.findIndex(f => json[i].quotation[0].commercialMedication[j].farmacy.id == f.id)
    //       if (existeFarmacia == -1) {
    //         let indexNuevaFarmacia = farmacias.push(json[i].quotation[0].commercialMedication[j].farmacy) - 1
    //         farmacias[indexNuevaFarmacia].medicamentos = []
    //         farmacias[indexNuevaFarmacia].medicamentos.push(json[i].medication)
    //       } else {
    //         let existeMedicamento = farmacias[existeFarmacia].medicamentos.findIndex(m => json[i].medication.id === m.id)
    //         if (existeMedicamento == -1) {
    //           farmacias[existeFarmacia].medicamentos.push(json[i].medication)
    //         }
    //       }
    //     }
    //   }
    // }


    // for (let i = 0; i < json.length; i++) {
    //   for (let j = 0; j < json[i].quotation[0].commercialMedication.length; j++) {
    //     // console.log("commercialMedication", json[i].quotation[0].commercialMedication[j])

    //     let indexFarmacia = farmacias.findIndex(f => f.id === json[i].quotation[0].commercialMedication[j].farmacy.id)
    //     json[i].quotation[0].commercialMedication[j].products.forEach(producto => {
    //       // console.log(json[i].quotation[0].commercialMedication[j].farmacy.id)
    //       // console.log("elemnt", producto)
    //       if (!farmacias[indexFarmacia].productos) {
    //         farmacias[indexFarmacia].productos = []
    //       }
    //       let indexProducto = farmacias[indexFarmacia].productos.findIndex(p => p.id === producto.id)
    //       if (indexProducto === -1) {
    //         farmacias[indexFarmacia].productos.push(producto)
    //       }
    //     })

    //   }
    // }

    // farmacias.forEach(f => {
    //   console.log(f)
    //   f.productos.preciMinimo = this.obtenerPrecioMinimo(f.productos)
    // });
    // console.log("farmacias", farmacias)